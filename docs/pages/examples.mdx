---
title: Examples
description: Minimal, copy-paste examples for Guillotine EVM.
---

# Examples

## Call a STOP-only contract

```zig
const std = @import("std");
const primitives = @import("primitives");
const DefaultEvm = @import("evm").DefaultEvm;
const Database = @import("storage/database.zig").Database;
const BlockInfo = @import("block/block_info.zig").DefaultBlockInfo;
const TransactionContext = @import("block/transaction_context.zig").TransactionContext;

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    defer _ = gpa.deinit();
    const allocator = gpa.allocator();

    var db = Database.init(allocator);
    defer db.deinit();

    const block = BlockInfo{ .number = 1, .timestamp = 1, .difficulty = 0, .gas_limit = 30_000_000, .coinbase = primitives.ZERO_ADDRESS, .base_fee = 0, .prev_randao = [_]u8{0} ** 32 };
    const tx = TransactionContext{ .gas_limit = 1_000_000, .coinbase = primitives.ZERO_ADDRESS, .chain_id = 1 };

    var evm = try DefaultEvm.init(allocator, &db, block, tx, 0, primitives.ZERO_ADDRESS, .CANCUN);
    defer evm.deinit();

    const addr: primitives.Address = .{ .bytes = [_]u8{0x12} ++ [_]u8{0} ** 19 };
    const bytecode = [_]u8{0x00};
    const code_hash = try db.set_code(&bytecode);
    try db.set_account(addr.bytes, .{ .balance = 0, .nonce = 0, .code_hash = code_hash, .storage_root = [_]u8{0} ** 32 });

    const params = DefaultEvm.CallParams{ .call = .{ .caller = primitives.ZERO_ADDRESS, .to = addr, .value = 0, .input = &.{}, .gas = 100_000 } };
    const result = evm.call(params);
    if (!result.success) return error.ExecutionFailed;
}
```

Notes:
- Tests and examples print nothing on success by design.
- See `src/evm.zig` tests for more patterns (create, create2, delegatecall, staticcall).

Have a specific pattern in mind? Open an issue with the exact code and expected result.
