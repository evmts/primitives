---
title: Development Setup
description: Set up your development environment for contributing to Guillotine
---

# Development Setup

Welcome! We're excited you want to contribute to Guillotine. This guide will help you set up your development environment.

:::info[Contribution Welcome]
Guillotine welcomes contributions of all kinds, including AI-assisted contributions (with proper disclosure).
:::

## Prerequisites

### Required Tools

::::steps
### Install Zig

Development requires Zig 0.14.1 or later:

```bash
# Verify version
zig version
# Should output: 0.14.1 or higher
```

### Install Git

```bash
git --version
# Should output: 2.34 or higher
```

### Install Development Tools

```bash
# Code formatting
zig fmt --help

# Testing framework is built-in
zig test --help

# Optional: Benchmarking
bun --version
```
::::

## Setting Up

### Fork and Clone

::::steps
### Fork the Repository

1. Go to [github.com/williamcory/Guillotine](https://github.com/williamcory/Guillotine)
2. Click "Fork" in the top right
3. Select your account

### Clone Your Fork

```bash
git clone https://github.com/YOUR_USERNAME/Guillotine.git
cd Guillotine
```

### Add Upstream Remote

```bash
git remote add upstream https://github.com/williamcory/Guillotine.git
git fetch upstream
```
::::

## Development Workflow

### Building

```bash
# Standard build
zig build

# Debug build (with symbols)
zig build -Doptimize=Debug

# Test build
zig build test
```

### Running Tests

```bash
# Run all tests
zig build test

# Run specific test module
zig build test -- --test-filter "stack"

# Run with verbose output
zig build test -- --verbose
```

### Code Formatting

```bash
# Format all Zig files
zig fmt .

# Check formatting without changes
zig fmt --check .
```

## Project Structure

```
Guillotine/
├── src/
│   ├── evm.zig              # Main EVM implementation
│   ├── evm_config.zig       # Configuration
│   ├── frame/               # Execution frame
│   ├── instructions/        # Opcode handlers
│   ├── storage/             # State management
│   └── primitives/          # Basic types
├── test/
│   ├── differential/        # Differential tests vs revm
│   ├── e2e/                # End-to-end tests
│   └── fuzz/               # Fuzz tests
├── docs/                    # Documentation
└── build.zig               # Build configuration
```

## Development Guidelines

### Code Style

Follow Zig conventions:

```zig
// Good: snake_case for variables
const my_variable = 42;

// Good: PascalCase for types
const MyStruct = struct {
    field: u32,
};

// Good: camelCase for functions
pub fn myFunction() void {
    // Implementation
}
```

### Memory Management

Always pair allocations with cleanup:

```zig
// Good: defer cleanup
const data = try allocator.alloc(u8, 1024);
defer allocator.free(data);

// Good: errdefer for error cases
const thing = try allocator.create(Thing);
errdefer allocator.destroy(thing);
```

### Error Handling

Use explicit error handling:

```zig
// Good: explicit error union
pub fn doSomething() !void {
    return error.NotImplemented;
}

// Good: handle all error cases
const result = doSomething() catch |err| switch (err) {
    error.NotImplemented => {
        // Handle specific error
    },
    else => return err,
};
```

## Making Changes

### Creating a Branch

```bash
# Update main branch
git checkout main
git pull upstream main

# Create feature branch
git checkout -b feature/my-feature
```

### Development Cycle

::::steps
### Make Changes

Edit files in your preferred editor. Recommended:
- VSCode with Zig extension
- Neovim with zig.vim
- Emacs with zig-mode

### Test Your Changes

```bash
# Run tests
zig build test

# Run specific test
zig build test -- --test-filter "my_test"
```

### Format Code

```bash
# Format your changes
zig fmt .
```

### Commit Changes

```bash
git add .
git commit -m "feat: add new feature

- Detailed description
- Why this change is needed
- Any breaking changes"
```
::::

## Testing

### Writing Tests

Add tests in the same file as the code:

```zig
pub fn add(a: u32, b: u32) u32 {
    return a + b;
}

test "add function" {
    try testing.expectEqual(@as(u32, 5), add(2, 3));
    try testing.expectEqual(@as(u32, 0), add(0, 0));
}
```

### Running Differential Tests

```bash
# Run differential tests against revm
zig build test-differential
```

### Fuzzing

```bash
# Run fuzz tests
zig build fuzz -- --iterations 10000
```

## Debugging

### Debug Build

```bash
# Build with debug symbols
zig build -Doptimize=Debug

# Run with debugger
gdb zig-out/bin/guillotine
lldb zig-out/bin/guillotine
```

### Logging

Use the logging system:

```zig
const log = @import("log.zig");

log.debug("Debug message: {}", .{value});
log.info("Info message", .{});
log.warn("Warning: {s}", .{message});
log.err("Error occurred", .{});
```

### Print Debugging

For quick debugging:

```zig
std.debug.print("Value: {}\n", .{my_value});
std.debug.print("Hex: 0x{x}\n", .{my_hex});
```

## Common Tasks

### Adding an Opcode

1. Implement handler in appropriate `handlers_*.zig`
2. Add to dispatch table
3. Write tests
4. Update documentation

### Fixing a Bug

1. Write failing test
2. Fix the bug
3. Verify test passes
4. Add regression test

### Performance Optimization

1. Benchmark current performance
2. Make optimization
3. Benchmark again
4. Document improvement

## IDE Setup

### VSCode

```json
// .vscode/settings.json
{
    "zig.zigPath": "/usr/local/bin/zig",
    "zig.zls.enabled": true,
    "zig.formattingProvider": "zls",
    "editor.formatOnSave": true
}
```

### Neovim

```lua
-- init.lua
require('lspconfig').zls.setup{}
```

## Troubleshooting

### Common Issues

:::details[Build fails with "OutOfMemory"]
Increase available memory or use ReleaseSmall:
```bash
zig build -Doptimize=ReleaseSmall
```
:::

:::details[Tests fail with "FileNotFound"]
Ensure you're in the project root:
```bash
pwd  # Should show /path/to/Guillotine
```
:::

:::details[Cannot find module]
Use the module build system:
```bash
zig build test  # NOT 'zig test src/file.zig'
```
:::

## Getting Help

- **Discord**: [Join our Discord](https://discord.gg/guillotine)
- **Telegram**: [t.me/+ANThR9bHDLAwMjUx](https://t.me/+ANThR9bHDLAwMjUx)
- **GitHub Issues**: [Report bugs](https://github.com/williamcory/Guillotine/issues)
- **GitHub Discussions**: [Ask questions](https://github.com/williamcory/Guillotine/discussions)

## Next Steps

- Read [Code Guidelines](/contributing/guidelines)
- Review [Testing Requirements](/contributing/testing)
- Check [open issues](https://github.com/williamcory/Guillotine/issues)
- Join the community!